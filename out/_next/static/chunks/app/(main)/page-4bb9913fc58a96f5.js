(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9781:function(e,t,n){Promise.resolve().then(n.bind(n,87157))},87157:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var r=n(57437),l=n(49835),i=n(75562),o=n(18130),a=n.n(o);function s(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Title,{className:a().title,ta:"center",mt:100,children:(0,r.jsx)(i.Text,{inherit:!0,variant:"gradient",component:"span",gradient:{from:"pink",to:"yellow"},children:"Pilzkrieger"})}),(0,r.jsx)(i.Text,{c:"dimmed",ta:"center",size:"lg",maw:580,mx:"auto",mt:"xl",children:"Willkommen bei den Pilzkriegern! Hier ist alles super \uD83C\uDF44"})]})}var c=n(49801),u=n(34738),d=n(80711);function f(){let{setColorScheme:e}=(0,c.useMantineColorScheme)();return(0,r.jsxs)(u.Group,{justify:"center",mt:"xl",children:[(0,r.jsx)(d.Button,{onClick:()=>e("light"),children:"Light"}),(0,r.jsx)(d.Button,{onClick:()=>e("dark"),children:"Dark"}),(0,r.jsx)(d.Button,{onClick:()=>e("auto"),children:"Auto"})]})}var h=n(18471),p=n(16031),m=n(83278),g=n(34541),b=n(71257),j=n(89392),x=n(4752),y=n(57990),k=n(147),v=n(29270),C=n(2265);function w(e){let[t,{toggle:n}]=(0,v.useDisclosure)(!1),[l,{toggle:o}]=(0,v.useDisclosure)(!1),a=new Date(e.data.joinedAt),s=Math.ceil(Math.abs(new Date-a)/864e5);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(p.Container,{children:[(0,r.jsx)(i.Text,{size:"xl",fw:"800",onClick:n,style:{cursor:"pointer"},children:e.data.name}),(0,r.jsxs)(y.Collapse,{in:t,children:[(0,r.jsxs)(i.Text,{children:["Id: ",e.data.id]}),(0,r.jsxs)(i.Text,{children:["Name: ",e.data.name]}),(0,r.jsxs)(i.Text,{children:["Spenden: ",e.data.donations]}),(0,r.jsxs)(i.Text,{children:["Male bei Fisch gefehlt: ",2*s-e.data.fish," (",Math.round((2*s-e.data.fish)/(2*s)*100),"% gefehlt)"]}),e.data.nameHistory?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Text,{children:"Name History"}),(0,r.jsx)(y.Collapse,{in:l,children:e.data.nameHistory.map(e=>(0,r.jsx)(i.Text,{children:e}))})]}):(0,r.jsx)(r.Fragment,{})]})]})})}var S=n(50144);let O="undefined"!=typeof window?C.useLayoutEffect:C.useEffect;function E(e,t){O(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function D(e){return null===e||"object"!=typeof e?{}:Object.keys(e).reduce((t,n)=>{let r=e[n];return null!=r&&!1!==r&&(t[n]=r),t},{})}function N(e,t){let n=Object.keys(e);if("string"==typeof t){let r=n.filter(e=>e.startsWith("".concat(t,".")));return e[t]||r.some(t=>e[t])||!1}return n.some(t=>e[t])}function T(e,t){if(null===t||"object"!=typeof t)return{};let n={...t};return Object.keys(t).forEach(t=>{t.includes("".concat(String(e),"."))&&delete n[t]}),n}function M(e,t){return parseInt(e.substring(t.length+1).split(".")[0],10)}function P(e,t,n,r){if(void 0===t)return n;let l="".concat(String(e)),i=n;-1===r&&(i=T("".concat(l,".").concat(t),i));let o={...i},a=new Set;return Object.entries(i).filter(e=>{let[n]=e;if(!n.startsWith("".concat(l,".")))return!1;let r=M(n,l);return!Number.isNaN(r)&&r>=t}).forEach(e=>{let[t,n]=e,i=M(t,l),s=t.replace("".concat(l,".").concat(i),"".concat(l,".").concat(i+r));o[s]=n,a.add(s),a.has(t)||delete o[t]}),o}function _(e){return"string"!=typeof e?[]:e.split(".")}function I(e,t){let n=_(e);if(0===n.length||"object"!=typeof t||null===t)return;let r=t[n[0]];for(let e=1;e<n.length&&void 0!==r;e+=1)r=r[n[e]];return r}function A(e,t,n){"object"==typeof n.value&&(n.value=F(n.value)),n.enumerable&&!n.get&&!n.set&&n.configurable&&n.writable&&"__proto__"!==t?e[t]=n.value:Object.defineProperty(e,t,n)}function F(e){if("object"!=typeof e)return e;var t,n,r,l=0,i=Object.prototype.toString.call(e);if("[object Object]"===i?r=Object.create(e.__proto__||null):"[object Array]"===i?r=Array(e.length):"[object Set]"===i?(r=new Set,e.forEach(function(e){r.add(F(e))})):"[object Map]"===i?(r=new Map,e.forEach(function(e,t){r.set(F(t),F(e))})):"[object Date]"===i?r=new Date(+e):"[object RegExp]"===i?r=new RegExp(e.source,e.flags):"[object DataView]"===i?r=new e.constructor(F(e.buffer)):"[object ArrayBuffer]"===i?r=e.slice(0):"Array]"===i.slice(-6)&&(r=new e.constructor(e)),r){for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)A(r,n[l],Object.getOwnPropertyDescriptor(e,n[l]));for(l=0,n=Object.getOwnPropertyNames(e);l<n.length;l++)Object.hasOwnProperty.call(r,t=n[l])&&r[t]===e[t]||A(r,t,Object.getOwnPropertyDescriptor(e,t))}return r||e}function z(e,t,n){let r=_(e);if(0===r.length)return n;let l=F(n);if(1===r.length)return l[r[0]]=t,l;let i=l[r[0]];for(let e=1;e<r.length-1;e+=1){if(void 0===i)return l;i=i[r[e]]}return i[r[r.length-1]]=t,l}function B(e){let t=D(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function L(e,t){return"function"==typeof e?B(e(t)):B(function e(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return"object"!=typeof t||null===t?l:Object.keys(t).reduce((l,i)=>{let o=t[i],a="".concat(""===r?"":"".concat(r,".")).concat(i),s=I(a,n),c=!1;return"function"==typeof o&&(l[a]=o(s,n,a)),"object"==typeof o&&Array.isArray(s)&&(c=!0,s.forEach((t,r)=>e(o,n,"".concat(a,".").concat(r),l))),"object"!=typeof o||"object"!=typeof s||null===s||c||e(o,n,a,l),l},l)}(e,t))}function H(e,t,n){if("string"!=typeof e)return{hasError:!1,error:null};let r=L(t,n),l=Object.keys(r.errors).find(t=>e.split(".").every((e,n)=>e===t.split(".")[n]));return{hasError:!!l,error:l?r.errors[l]:null}}function V(e,t){return!!t&&("boolean"==typeof t?t:!!Array.isArray(t)&&t.includes(e.replace(/[.][0-9]/g,".".concat("__MANTINE_FORM_INDEX__"))))}function U(){let{name:e,initialValues:t,initialErrors:n={},initialDirty:r={},initialTouched:l={},clearInputErrorOnChange:i=!0,validateInputOnChange:o=!1,validateInputOnBlur:a=!1,onValuesChange:s,transformValues:c=e=>e,enhanceGetInputProps:u,validate:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[f,h]=(0,C.useState)(l),[p,m]=(0,C.useState)(r),[g,b]=(0,C.useState)(t||{}),[j,x]=(0,C.useState)(D(n)),[y,k]=(0,C.useState)(!1),v=(0,C.useRef)(t||{}),w=e=>{v.current=e},O=(0,C.useCallback)(e=>{y||(k(!0),b(e),w(e))},[y]),M=(0,C.useCallback)(()=>h({}),[]),_=(0,C.useCallback)(e=>x(t=>D("function"==typeof e?e(t):e)),[]),A=(0,C.useCallback)(()=>x({}),[]),F=(0,C.useCallback)(()=>{b(v.current),A(),m({}),M()},[]),B=(0,C.useCallback)((e,t)=>_(n=>({...n,[e]:t})),[]),U=(0,C.useCallback)(e=>_(t=>{if("string"!=typeof e)return t;let n={...t};return delete n[e],n}),[]),W=(0,C.useCallback)(e=>m(t=>{if("string"!=typeof e)return t;let n=T(e,t);return delete n[e],n}),[]),J=(0,C.useCallback)((e,t)=>{let n=V(e,o);W(e),h(t=>({...t,[e]:!0})),b(r=>{let l=I(e,r),i=z(e,t instanceof Function?t(l):t,r);if(n){let t=H(e,d,i);t.hasError?B(e,t.error):U(e)}return null==s||s(i,r),i}),!n&&i&&B(e,null)},[s]),R=(0,C.useCallback)(e=>{b(t=>{let n=e instanceof Function?e(t):e,r={...t,...n};return null==s||s(r,t),r}),i&&A()},[s]),G=(0,C.useCallback)((e,t)=>{W(e),b(n=>{let r=function(e,t,n){let{from:r,to:l}=t,i=I(e,n);if(!Array.isArray(i))return n;let o=[...i],a=i[r];return o.splice(r,1),o.splice(l,0,a),z(e,o,n)}(e,t,n);return null==s||s(r,n),r}),x(n=>(function(e,t,n){let{from:r,to:l}=t,i="".concat(e,".").concat(r),o="".concat(e,".").concat(l),a={...n};return Object.keys(n).every(e=>{let t,n;if(e.startsWith(i)&&(t=e,n=e.replace(i,o)),e.startsWith(o)&&(t=e.replace(o,i),n=e),t&&n){let e=a[t],r=a[n];return void 0===r?delete a[t]:a[t]=r,void 0===e?delete a[n]:a[n]=e,!1}return!0}),a})(e,t,n))},[]),X=(0,C.useCallback)((e,t)=>{W(e),b(n=>{let r=function(e,t,n){let r=I(e,n);return Array.isArray(r)?z(e,r.filter((e,n)=>n!==t),n):n}(e,t,n);return null==s||s(r,n),r}),x(n=>P(e,t,n,-1))},[]),Z=(0,C.useCallback)((e,t,n)=>{W(e),b(r=>{let l=function(e,t,n,r){let l=I(e,r);if(!Array.isArray(l))return r;let i=[...l];return i.splice("number"==typeof n?n:i.length,0,t),z(e,i,r)}(e,t,n,r);return null==s||s(l,r),l}),x(t=>P(e,n,t,1))},[]),$=(0,C.useCallback)(()=>{let e=L(d,g);return x(e.errors),e},[g,d]),q=(0,C.useCallback)(e=>{let t=H(e,d,g);return t.hasError?B(e,t.error):U(e),t},[g,d]),K=(0,C.useCallback)(e=>{e.preventDefault(),F()},[]),Q=(0,C.useCallback)(e=>N(f,e),[f]),Y=(0,C.useCallback)(e=>e?!H(e,d,g).hasError:!L(d,g).hasErrors,[g,d]),ee={initialized:y,values:g,errors:j,initialize:O,setValues:R,setInitialValues:w,setErrors:_,setFieldValue:J,setFieldError:B,clearFieldError:U,clearErrors:A,reset:F,validate:$,validateField:q,reorderListItem:G,removeListItem:X,insertListItem:Z,getInputProps:function(e){var t;let{type:n="input",withError:r=!0,withFocus:l=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={onChange:(t=t=>J(e,t),e=>{if(e){if("function"==typeof e)t(e);else if("object"==typeof e&&"nativeEvent"in e){let{currentTarget:n}=e;n instanceof HTMLInputElement?"checkbox"===n.type?t(n.checked):t(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&t(n.value)}else t(e)}else t(e)})};return r&&(o.error=j[e]),"checkbox"===n?o.checked=I(e,g):o.value=I(e,g),l&&(o.onFocus=()=>h(t=>({...t,[e]:!0})),o.onBlur=()=>{if(V(e,a)){let t=H(e,d,g);t.hasError?B(e,t.error):U(e)}}),Object.assign(o,null==u?void 0:u({inputProps:o,field:e,options:{type:n,withError:r,withFocus:l,...i},form:ee}))},onSubmit:(e,t)=>n=>{null==n||n.preventDefault();let r=$();r.hasErrors?null==t||t(r.errors,g,n):null==e||e(c(g),n)},onReset:K,isDirty:e=>{if(e){let t=I(e,p);return"boolean"==typeof t?t:!S(I(e,g),I(e,v.current))}return Object.keys(p).length>0?N(p):!S(g,v.current)},isTouched:Q,setTouched:h,setDirty:m,resetTouched:M,resetDirty:e=>{w(e?{...g,...e}:g),m({})},isValid:Y,getTransformedValues:e=>c(e||g)};return e&&function(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw Error('[@mantine/use-form] Form name "'.concat(e,'" is invalid, it should contain only letters, numbers and dashes'))}(e),E("mantine-form:".concat(e,":set-field-value"),e=>ee.setFieldValue(e.detail.path,e.detail.value)),E("mantine-form:".concat(e,":set-values"),e=>ee.setValues(e.detail)),E("mantine-form:".concat(e,":set-initial-values"),e=>ee.setInitialValues(e.detail)),E("mantine-form:".concat(e,":set-errors"),e=>ee.setErrors(e.detail)),E("mantine-form:".concat(e,":set-field-error"),e=>ee.setFieldError(e.detail.path,e.detail.error)),E("mantine-form:".concat(e,":clear-field-error"),e=>ee.clearFieldError(e.detail)),E("mantine-form:".concat(e,":clear-errors"),ee.clearErrors),E("mantine-form:".concat(e,":reset"),ee.reset),E("mantine-form:".concat(e,":validate"),ee.validate),E("mantine-form:".concat(e,":validate-field"),e=>ee.validateField(e.detail)),E("mantine-form:".concat(e,":reorder-list-item"),e=>ee.reorderListItem(e.detail.path,e.detail.payload)),E("mantine-form:".concat(e,":remove-list-item"),e=>ee.removeListItem(e.detail.path,e.detail.index)),E("mantine-form:".concat(e,":insert-list-item"),e=>ee.insertListItem(e.detail.path,e.detail.item,e.detail.index)),E("mantine-form:".concat(e,":set-dirty"),e=>ee.setDirty(e.detail)),E("mantine-form:".concat(e,":set-touched"),e=>ee.setTouched(e.detail)),E("mantine-form:".concat(e,":reset-dirty"),e=>ee.resetDirty(e.detail)),E("mantine-form:".concat(e,":reset-touched"),ee.resetTouched),ee}function W(){let[e,{toggle:t}]=(0,v.useDisclosure)(!0),[n,{toggle:l}]=(0,v.useDisclosure)(!0),[o,{open:a,close:c}]=(0,v.useDisclosure)(!1),u=U({initialValues:{name:"",id:""}}),[S,{open:O,close:E}]=(0,v.useDisclosure)(!1),[D,N]=(0,C.useState)(""),[T,{open:M,close:P}]=(0,v.useDisclosure)(!1),[_,I]=(0,C.useState)(""),A=U({initialValues:{nameChange:"",fishParticipation:!1,donations:0}}),[F,{open:z,close:B}]=(0,v.useDisclosure)(!1),[L,H]=(0,C.useState)([]),[V,{open:W,close:J}]=(0,v.useDisclosure)(!1),[R,G]=(0,C.useState)([]),[X,Z]=(0,C.useState)(0),[$,q]=(0,C.useState)([]);return(0,C.useEffect)(()=>{(async()=>{let e=await fetch("/api/getUsers"),t=(await e.json()).data;console.log(t),q(t)})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Modal,{opened:o,onClose:c,title:"Mitglied hizuf\xfcgen",children:[(0,r.jsxs)(p.Container,{children:[(0,r.jsx)(m.TextInput,{...u.getInputProps("name"),label:"Name",placeholder:"Name"}),(0,r.jsx)(m.TextInput,{...u.getInputProps("id"),label:"ID",placeholder:"ID"})]}),(0,r.jsx)(d.Button,{onClick:()=>{fetch("/api/addUser",{method:"POST",body:JSON.stringify(u.values)}),window.location.reload()},children:"Hinzuf\xfcgen"})]}),(0,r.jsxs)(h.Modal,{opened:S,onClose:E,title:"Mitglied entfernen",children:[(0,r.jsx)(g.Select,{label:"Nutzer ausw\xe4hlen",placeholder:"Nutzer ausw\xe4hlen",data:$.map(e=>e.name+" ("+e.id+")"),searchable:!0,value:D,onChange:N}),(0,r.jsx)(d.Button,{onClick:()=>{fetch("/api/removeUser",{method:"POST",body:JSON.stringify({id:null==D?void 0:D.split("(")[1].split(")")[0]})}),window.location.reload()},children:"Entfernen"})]}),(0,r.jsxs)(h.Modal,{opened:T,onClose:P,title:"Mitglied bearbeiten",children:[(0,r.jsx)(g.Select,{label:"Nutzer ausw\xe4hlen",placeholder:"Nutzer ausw\xe4hlen",data:$.map(e=>e.name+" ("+e.id+")"),searchable:!0,value:_,onChange:I}),(0,r.jsxs)(p.Container,{children:[(0,r.jsx)(m.TextInput,{...A.getInputProps("nameChange"),label:"Name",placeholder:"Name"}),(0,r.jsx)(b.NumberInput,{...A.getInputProps("donations"),label:"Spenden",placeholder:"Spenden"}),(0,r.jsx)(j.Checkbox,{...A.getInputProps("fishParticipation"),label:"Fischteilnahme",placeholder:"Fischteilnahme"})]}),(0,r.jsx)(d.Button,{onClick:()=>{fetch("/api/editUser",{method:"POST",body:JSON.stringify({id:null==_?void 0:_.split("(")[1].split(")")[0],...A.values})}),window.location.reload()},children:"Bearbeiten"})]}),(0,r.jsxs)(h.Modal,{opened:F,onClose:B,title:"Fischikampf ergebnisse",children:[(0,r.jsx)(x.MultiSelect,{data:$.map(e=>e.name+" ("+e.id+")"),value:L,onChange:H}),";",(0,r.jsx)(d.Button,{onClick:()=>{L.map(e=>{fetch("/api/editUser",{method:"POST",body:JSON.stringify({id:e.split("(")[1].split(")")[0],fishParticipation:!0})})}),window.location.reload()},mt:"lg",children:"Ergebnisse eintragen"})]}),(0,r.jsxs)(h.Modal,{opened:V,onClose:J,title:"Bulk Spenden hinzuf\xfcgen",children:[(0,r.jsx)(x.MultiSelect,{data:$.map(e=>e.name+" ("+e.id+")"),value:R,onChange:G}),(0,r.jsx)(b.NumberInput,{value:X,onChange:Z,label:"Spenden",placeholder:"Spenden",min:0,max:500,step:100}),(0,r.jsx)(d.Button,{onClick:()=>{R.map(e=>{fetch("/api/editUser",{method:"POST",body:JSON.stringify({id:e.split("(")[1].split(")")[0],donations:100})})}),window.location.reload()},mt:"lg",children:"Spenden hinzuf\xfcgen"})]}),(0,r.jsx)(s,{}),(0,r.jsx)(i.Text,{c:"dimmed",ta:"center",size:"lg",maw:580,mx:"auto",mt:"xl",onClick:t,style:{cursor:"pointer"},children:"Farbschema \xe4ndern"}),(0,r.jsx)(y.Collapse,{in:e,children:(0,r.jsx)(f,{})}),(0,r.jsx)(i.Text,{c:"dimmed",ta:"center",size:"lg",maw:580,mx:"auto",mt:"xl",onClick:l,style:{cursor:"pointer"},children:"Clanmitglieder einsehen"}),(0,r.jsx)(y.Collapse,{in:n,children:(0,r.jsx)(k.SimpleGrid,{cols:3,w:"750",mx:"auto",children:$.map(e=>(0,r.jsx)(w,{data:e}))})}),(0,r.jsxs)(k.SimpleGrid,{cols:3,w:"750",mx:"auto",mt:20,children:[(0,r.jsx)(d.Button,{p:0,onClick:a,children:"Mitglied hinzuf\xfcgen"}),(0,r.jsx)(d.Button,{p:0,onClick:O,children:"Mitglied entefernen"}),(0,r.jsx)(d.Button,{p:0,onClick:M,children:"Mitgliederdaten hinzuf\xfcgen"})]}),(0,r.jsxs)(k.SimpleGrid,{cols:2,w:"750",mx:"auto",mt:20,children:[(0,r.jsx)(d.Button,{onClick:z,mx:"auto",children:"Fischikampf ergebnisse"}),(0,r.jsx)(d.Button,{onClick:W,mx:"auto",children:"Bulk Spnden hinzuf\xfcgen"})]})]})}},50144:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(l=r;0!=l--;)if(!e(t[l],n[l]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(l=r;0!=l--;)if(!Object.prototype.hasOwnProperty.call(n,i[l]))return!1;for(l=r;0!=l--;){var r,l,i,o=i[l];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},18130:function(e){e.exports={title:"Welcome_title__Cz_nm"}}},function(e){e.O(0,[880,629,302,971,69,744],function(){return e(e.s=9781)}),_N_E=e.O()}]);